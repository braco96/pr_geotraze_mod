<!DOCTYPE html>
<html>
 <head>
    <meta charset="utf-8" />
        <style>
          html, body{
            height:80%;
            width:100%
            margin-top: 700px;
          }
        </style>
	<script type='text/javascript'>
     var directionsManager;
     function GetMap() {
         var map = new Microsoft.Maps.Map('#myMap', {
            credentials: 'AusAvA14VCSfLYOZmrvHRfdg_B_fcPT4V3wV-ovSNhvI7WbVPOGhbEMfKH2ZdTVe',
            center: new Microsoft.Maps.Location(40.433367, -3.700833),
            mapTypeId: Microsoft.Maps.MapTypeId.calles,
            zoom: 10
      });

      var center = map.getCenter(); 
                    //Create custom Pushpin
                    var pin = new Microsoft.Maps.Pushpin(new Microsoft.Maps.Location(40.42703 , -3.71357), {
                            icon: 'C:/Users/Luis Bravo Collado/Desktop/imagenes/iconos/IMG_20191205_155222 (1).jpg',
                            anchor: new Microsoft.Maps.Point(12, 39)
                            });
                     //Add the pushpin to the map
                     map.entities.push(pin);
                               
                    //Create custom Pushpin
                    var pin = new Microsoft.Maps.Pushpin(new Microsoft.Maps.Location(40.45264 , -3.69891), {
                            icon: 'C:/Users/Luis Bravo Collado/Desktop/imagenes/iconos/IMG_20191205_155707_1.jpg',
                            anchor: new Microsoft.Maps.Point(12, 39)
                            });
                     //Add the pushpin to the map
                     map.entities.push(pin);
                              Microsoft.Maps.loadModule('Microsoft.Maps.Directions', function () {
                                                
            //Ask for routing mode(default = driving) via html-select
            var user = document.getElementById("routingModing");
            var routeSelected = user.options[user.selectedIndex].text;
            
           //Set routing mode as user wants 
           var routeModeSelected=Microsoft.Maps.Directions.RouteMode.driving
           if(routeSelected == "walking"){
            routeModeSelected=Microsoft.Maps.Directions.RouteMode.walking
           }else if(routeSelected == "transit"){
            routeModeSelected=Microsoft.Maps.Directions.RouteMode.transit
           }
                                               
            //Create an instance of the directions manager.
            directionsManager = new Microsoft.Maps.Directions.DirectionsManager(map);
            //Calculate a date time that is 1 hour from now.
            var departureTime  = new Date();
            departureTime.setMinutes(departureTime.getHours() + 1);
            //Set Route Mode
            directionsManager.setRequestOptions({
                routeMode: routeModeSelected,
                time: departureTime,
                timeType: Microsoft.Maps.Directions.TimeTypes.departure
            }); var workWaypoint = new Microsoft.Maps.Directions.Waypoint({ address: 'IMG_20191205_155222 (1)', location: new Microsoft.Maps.Location(40.42703 ,-3.71357) });
                        directionsManager.addWaypoint(workWaypoint);  var workWaypoint = new Microsoft.Maps.Directions.Waypoint({ address: 'IMG_20191205_155707_1', location: new Microsoft.Maps.Location(40.45264 ,-3.69891) });
                        directionsManager.addWaypoint(workWaypoint); 
            //Specify the element in which the itinerary will be rendered.
             directionsManager.setRenderOptions({ itineraryContainer: document.getElementById('directionsItinerary') });
            //Calculate directions.
            directionsManager.calculateDirections();
                });
            }
                                            
            function refreshMap(){
                    GetMap();
            }
   </script>
            
   <script type='text/javascript' src='http://www.bing.com/api/maps/mapcontrol?callback=GetMap&key=[AusAvA14VCSfLYOZmrvHRfdg_B_fcPT4V3wV-ovSNhvI7WbVPOGhbEMfKH2ZdTVe]' async defer></script>
 </head>
<body>
      <div>
          <p style="font-family:fantasy;color:darkcyan;font-size:40px;margin-bottom:5px;text-align: center;">Geotrace</p>
          <p style="font-family: auto;color:darkcyan;font-size:20px;margin-bottom: 50px;text-align: center;">Una aplicaci&oacute;n para el seguimiento geogr&aacute;fico de im&aacute;genes</p>
      </div>
  
      <div style="color: darkcyan;font-family: auto;font-size: 18px;">Please select your favorite option:
        <select id="routingModing" onchange="refreshMap()" style="font-size: 20px;color: darkcyan;font-family: auto;border: none;cursor: pointer;font-style: italic;font-weight: 900">
        <option value="1" selected="selected" style="color: red;">driving</option>
        <option value="2" style="color: orange;">transit</option> 
        <option value="3" style="color: greenyellow;">walking</option>
        </select>
      </div>                      
                  
      <div id="myMap" style="margin-top:5px"></div>
      <div id='directionsItinerary'></div>
</body>
</html>
